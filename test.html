<!DOCTYPE html>
<html>
<head>
  <title>Potražite povoljne proizvode</title>
  <style>
    /* CSS styles here */
  </style>
</head>
<body>
  <div class="container">
    <h1 style="font-family: 'Poppins', sans-serif;">Potražite povoljne proizvode</h1>
    <form onsubmit="performSearch(event)" class="searchForm">
      <input type="text" id="searchInput" placeholder="Unesite naziv proizvoda">
      <input type="submit" value="Pretraži">
    </form>
    <div id="searchResults" class="searchResults"></div>

    <div class="forumBox">
      <h2 class="forumTitle" style="font-family: 'Poppins', sans-serif;">Forum</h2>
      <p class="forumContent">This is the forum section where users can discuss and share information about cheap products. Feel free to ask questions or contribute to the discussions.</p>

      <form onsubmit="submitComment(event)" class="commentForm">
        <input type="text" id="commentInput" class="commentInput" placeholder="Write your comment">
        <input type="submit" class="commentSubmit" value="Submit">
      </form>

      <div class="comments" id="comments">
        <!-- Comment elements will be dynamically added here -->
      </div>
    </div>
  </div>

  <div class="modeSwitch">
    <label for="darkModeToggle">Dark Mode</label>
    <input type="checkbox" id="darkModeToggle" onchange="toggleDarkMode()">
  </div>

  <script>
    // JavaScript code here

    // Fetch comments from the server and display them
    function fetchComments() {
      fetch('/comments')
        .then(response => response.json())
        .then(comments => {
          const commentsContainer = document.getElementById('comments');
          commentsContainer.innerHTML = '';

          comments.forEach(comment => {
            const commentElement = document.createElement('p');
            commentElement.textContent = comment;
            commentsContainer.appendChild(commentElement);
          });
        })
        .catch(error => {
          console.error('Error fetching comments:', error);
        });
    }

    // Submit comment to the server
    function submitComment(event) {
      event.preventDefault();
      const commentInput = document.getElementById('commentInput');
      const comment = commentInput.value;

      if (comment.trim() === '') {
        return;
      }

      fetch('/comments', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({ comment })
      })
        .then(response => response.json())
        .then(data => {
          if (data.success) {
            commentInput.value = '';
            fetchComments(); // Refresh comments after successful submission
          }
        })
        .catch(error => {
          console.error('Error submitting comment:', error);
        });
    }

    // Fetch search results from different search engines
    function performSearch(event) {
      event.preventDefault();
      const searchQuery = document.getElementById('searchInput').value;
      const googleSearchUrl = 'https://www.google.com/search?q=' + encodeURIComponent(searchQuery) + ' online dučan najpovoljnija cijena';
      const bingSearchUrl = 'https://www.bing.com/search?q=' + encodeURIComponent(searchQuery) + ' online dučan najpovoljnija cijena';
      const duckDuckGoSearchUrl = 'https://duckduckgo.com/?q=' + encodeURIComponent(searchQuery) + ' online dučan najpovoljnija cijena';

      const searchResultsDiv = document.getElementById('searchResults');
      searchResultsDiv.innerHTML = '';

      const googleLink = createSearchLink('Google', googleSearchUrl);
      searchResultsDiv.appendChild(googleLink);

      const bingLink = createSearchLink('Bing', bingSearchUrl);
      searchResultsDiv.appendChild(bingLink);

      const duckDuckGoLink = createSearchLink('DuckDuckGo', duckDuckGoSearchUrl);
      searchResultsDiv.appendChild(duckDuckGoLink);
    }

    // Helper function to create search result links
    function createSearchLink(engineName, searchUrl) {
      const link = document.createElement('a');
      link.href = searchUrl;
      link.target = '_blank';
      link.textContent = 'Pretraži na ' + engineName;
      link.classList.add('searchLink');
      return link;
    }

    // Toggle dark mode
    function toggleDarkMode() {
      const body = document.body;
      const container = document.querySelector('.container');

      body.classList.toggle('darkMode');
      container.classList.toggle('darkMode');
    }

    // Initial fetch of comments when the page loads
    fetchComments();
  </script>
</body>
</html>
