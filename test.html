<!DOCTYPE html>
<html>
<head>
  <title>Lowest Price Search</title>
  <style>
    #map {
      height: 400px;
      width: 100%;
    }
  </style>
</head>
<body>
  <h1>Welcome to the Lowest Price Search Engine</h1>
  
  <form id="searchForm">
    <input type="text" id="queryInput" placeholder="Enter product name">
    <input type="submit" value="Search">
  </form>

  <h1>Search Results</h1>
  <ul id="resultsList"></ul>

  <div id="map"></div>

  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAW_iiSi-fNUQuFWG0wIe3d_f3qGomX68I&libraries=places"></script>
  
  <script>
    document.getElementById("searchForm").addEventListener("submit", function(event) {
      event.preventDefault();

      var query = document.getElementById("queryInput").value;

      // Use client location
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          var latitude = position.coords.latitude;
          var longitude = position.coords.longitude;

          var searchQuery = query + " Najni≈æa cijena";
          var searchQueryEncoded = encodeURIComponent(searchQuery);
          var searchUrl = "https://www.google.com/search?q=" + searchQueryEncoded + "&near=" + latitude + "," + longitude;

          window.open(searchUrl, "_blank");

          var map = new google.maps.Map(document.getElementById('map'), {
            center: {lat: latitude, lng: longitude},
            zoom: 14
          });

          var marker = new google.maps.Marker({
            position: {lat: latitude, lng: longitude},
            map: map,
            title: 'Your Location'
          });

        }, function(error) {
          console.error("Error retrieving location:", error);
        });
      } else {
        console.error("Geolocation is not supported by this browser.");
      }
    });

    function findNearestShop() {
      // Remaining code for finding the nearest shop
      // ...
    }
  </script>

</body>
</html>
