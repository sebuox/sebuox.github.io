<!DOCTYPE html>
<html>
<head>
  <title>Nearest Shop Search</title>
  <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAW_iiSi-fNUQuFWG0wIe3d_f3qGomX68I=places"></script>
</head>
<body>
  <h1>Welcome to the Nearest Shop Search Engine</h1>
  
  <form id="searchForm">
    <input type="text" id="queryInput" placeholder="Enter product name">
    <input type="submit" value="Search">
  </form>

  <h1>Search Results</h1>
  <ul id="resultsList"></ul>

  <script>
    document.getElementById("searchForm").addEventListener("submit", function(event) {
      event.preventDefault();

      var query = document.getElementById("queryInput").value;

      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          var latitude = position.coords.latitude;
          var longitude = position.coords.longitude;

          var searchQuery = query + " nearest shop";

          var request = {
            location: new google.maps.LatLng(latitude, longitude),
            radius: '5000', // Specify the radius within which to search for places (in meters)
            keyword: searchQuery
          };

          var service = new google.maps.places.PlacesService(document.createElement('div'));

          service.nearbySearch(request, function(results, status) {
            if (status === google.maps.places.PlacesServiceStatus.OK) {
              var resultsList = document.getElementById("resultsList");
              resultsList.innerHTML = ""; // Clear previous results

              // Display the nearest shop results
              results.forEach(function(place) {
                var listItem = document.createElement("li");
                listItem.textContent = place.name + " - Address: " + place.vicinity;
                resultsList.appendChild(listItem);
              });
            } else {
              console.error("Error fetching search results:", status);
            }
          });
        }, function(error) {
          console.error("Error retrieving location:", error);
        });
      } else {
        console.error("Geolocation is not supported by this browser.");
      }
    });
  </script>

</body>
</html>
