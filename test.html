<!DOCTYPE html>
<html>
<head>
    <title>LSB Image Steganography - Decode</title>
    <script>
        function decodeMessage() {
            var img = document.getElementById('encoded_image');
            var canvas = document.createElement('canvas');
            var ctx = canvas.getContext('2d');

            canvas.width = img.width;
            canvas.height = img.height;
            ctx.drawImage(img, 0, 0);

            var imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            var pixels = imageData.data;

            var message = '';
            var currentCharCode = 0;
            var bitIndex = 0;

            for (var i = 0; i < pixels.length; i += 4) {
                var pixel = pixels.slice(i, i + 4);

                // Retrieve the LSB of the red channel and assemble the characters
                currentCharCode |= ((pixel[0] & 1) << (7 - bitIndex));

                bitIndex++;

                if (bitIndex >= 8) {
                    // Check for null termination (ASCII code 0)
                    if (currentCharCode === 0) {
                        break;
                    }

                    message += String.fromCharCode(currentCharCode);
                    currentCharCode = 0;
                    bitIndex = 0;
                }
            }

            var decodedMessage = document.getElementById('decoded_message');
            decodedMessage.innerText = message;
        }
    </script>
</head>
<body>
    <h1>LSB Image Steganography - Decode</h1>
    <img id="encoded_image" src="encoded_image.png" style="display: none;"><br>
    <button onclick="decodeMessage()">Decode</button><br>
    <p id="decoded_message"></p>
</body>
</html>
