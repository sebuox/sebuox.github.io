<!DOCTYPE html>
<html>
<head>
  <title>Steganography Encoder/Decoder</title>
</head>
<body>
  <input type="file" id="image-input" accept="image/*" />
  <textarea id="secret-message" rows="4" cols="50"></textarea>
  <button onclick="encode()">Encode</button>
  <button onclick="decode()">Decode</button>
  <img id="encoded-image" />
  <p id="decoded-message"></p>

  <script>
    function encode() {
      const imageInput = document.getElementById('image-input');
      const secretMessage = document.getElementById('secret-message').value;
      const encodedImage = document.getElementById('encoded-image');

      const reader = new FileReader();
      reader.onload = function (e) {
        const image = new Image();
        image.onload = function () {
          const canvas = document.createElement('canvas');
          canvas.width = image.width;
          canvas.height = image.height;

          const context = canvas.getContext('2d');
          context.drawImage(image, 0, 0);
          context.font = '12px Arial';
          context.fillText(secretMessage, 10, 10);

          encodedImage.src = canvas.toDataURL();
        };
        image.src = e.target.result;
      };
      reader.readAsDataURL(imageInput.files[0]);
    }

    function decode() {
      const encodedImage = document.getElementById('encoded-image');
      const decodedMessage = document.getElementById('decoded-message');

      const image = new Image();
      image.onload = function () {
        const canvas = document.createElement('canvas');
        canvas.width = image.width;
        canvas.height = image.height;

        const context = canvas.getContext('2d');
        context.drawImage(image, 0, 0);
        const imageData = context.getImageData(0, 0, canvas.width, canvas.height);

        let message = '';
        for (let i = 0; i < imageData.data.length; i += 4) {
          const r = imageData.data[i];
          const g = imageData.data[i + 1];
          const b = imageData.data[i + 2];
          const charCode = r + g + b;
          message += String.fromCharCode(charCode);
        }

        decodedMessage.innerText = message;
      };
      image.src = encodedImage.src;
    }
  </script>
</body>
</html>
